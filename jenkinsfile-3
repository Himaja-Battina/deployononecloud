pipeline {
    agent{
    label "PokOpenShiftOnZ"
    }
    stages {
        stage('Deploy Application') {
            steps {
            withCredentials([string(credentialsId: 'testing-token-onecloud-service-token', variable: 'OCP_stoken')]){
                   
                                 
                // Install 'oc' command using 'openshift-client-plugin'
               
                // Configure OCP credentials
                
                    // Deploy application to OCP cluster using 'oc' command and deployment YAML file
                    sh """
                        oc login  --token=$OCP_stoken --namespace=testing-jenkins --insecure-skip-tls-verify
                        oc project testing-jenkins
                        oc apply -f my-app-deployment.yaml
                    """
                    
                   
                }
            }
        }
    }
}
